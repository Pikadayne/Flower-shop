
window.products = {
  "_comment": "Đường dẫn hình ảnh: sử dụng 'assets/img/products/product-{id}.jpg' cho hình ảnh thực tế. Thay {id} bằng ID sản phẩm thực tế.",
  "categories": [
    {
      "id": "son-tung-noel",
      "name": "SƠN TÙNG NOEL",
      "products": [
        {
          "id": 1,
          "name": "Phút Giây Ấm Áp (60cm)",
          "image": "assets/img/products/product-1.jpg",
          "currentPrice": 450000,
          "oldPrice": 490000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 2,
          "name": "Món Quà Noel (60cm)",
          "image": "assets/img/products/product-2.jpg",
          "currentPrice": 450000,
          "oldPrice": 490000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 3,
          "name": "Cây Sơn Tùng Noel - 008 (60cm)",
          "image": "assets/img/products/product-3.jpg",
          "currentPrice": 450000,
          "oldPrice": 490000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 4,
          "name": "Cây Sơn Tùng Noel - 026 (60cm)",
          "image": "assets/img/products/product-4.jpg",
          "currentPrice": 450000,
          "oldPrice": 490000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 5,
          "name": "Cây Sơn Tùng Noel - 039 (100cm)",
          "image": "assets/img/products/product-5.jpg",
          "currentPrice": 760000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 6,
          "name": "Phút Giây An Lành (100cm)",
          "image": "assets/img/products/product-6.jpg",
          "currentPrice": 760000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        }
      ]
    },
    {
      "id": "dang-giam-gia",
      "name": "Đang Giảm Giá",
      "products": [
      ]
    },
    {
      "id": "dat-nhieu-nhat",
      "name": "ĐẶT NHIỀU NHẤT",
      "products": [
        
      ]
    },
    {
      "id": "san-pham-moi",
      "name": "SẢN PHẨM MỚI",
      "products": [
        
      ]
    },
    {
      "id": "hoa-sinh-nhat",
      "name": "HOA SINH NHẬT",
      "products": [
        {
          "id": 51,
          "name": "Bó hoa hồng tặng sinh nhật dễ thương",
          "image": "assets/img/products/HoaSinhNhat/hoasinhnhat1 Bó hoa hồng tặng sinh nhật dễ thương Discount 0%.jpg",
          "currentPrice": 280000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 52,
          "name": "Bó hoa sinh nhật kèm thiệp chúc",
          "image": "assets/img/products/HoaSinhNhat/hoasinhnhat2 Bó hoa sinh nhật kèm thiệp chúc Discount 0%.jpg",
          "currentPrice": 280000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 53,
          "name": "Hoa hồng xinh",
          "image": "assets/img/products/HoaSinhNhat/hoasinhnhat3 Hoa hồng xinh Discount 8%.jpg",
          "currentPrice": 280000,
          "oldPrice": 302400,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 54,
          "name": "Rổ hoa xinh",
          "image": "assets/img/products/HoaSinhNhat/hoasinhnhat4 Rổ hoa xinh Discount 8%.jpg",
          "currentPrice": 280000,
          "oldPrice": 302400,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 55,
          "name": "Hoa cẩm chướng",
          "image": "assets/img/products/HoaSinhNhat/hoasinhnhat5 Hoa cẩm chướng Discount 8%.jpg",
          "currentPrice": 280000,
          "oldPrice": 302400,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 56,
          "name": "Hoa King's Flora",
          "image": "assets/img/products/HoaSinhNhat/hoasinhnhat6 Hoa King's Flora Discount 0%.jpg",
          "currentPrice": 280000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 57,
          "name": "Hoa hồng lãng mạn",
          "image": "assets/img/products/HoaSinhNhat/hoasinhnhat8 Hoa hồng lãng mạn Discount 0%.jpg",
          "currentPrice": 280000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 58,
          "name": "Hoa xinh tặng nàng",
          "image": "assets/img/products/HoaSinhNhat/hoasinhnnhat7 Hoa xinh tặng nàng Discount 8%.jpg",
          "currentPrice": 280000,
          "oldPrice": 302400,
          "discount": 8,
          "hasDiscount": true
        }
      ]
    },
    {
      "id": "hoa-chuc-mung",
      "name": "HOA CHÚC MỪNG",
      "products": [
        {
          "id": 59,
          "name": "Bó hoa hồng đỏ, vàng",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung1 Bó hoa hồng đỏ, vàng Discount 10%.jpg",
          "currentPrice": 350000,
          "oldPrice": 385000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 60,
          "name": "Bó hoa hồng cam trắng vàng",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung10 Bó hoa hồng cam trắng vàng Discount 10%.jpg",
          "currentPrice": 350000,
          "oldPrice": 385000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 61,
          "name": "Bó hoa hướng dương",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung2 Bó hoa hướng dương Discount 7%.jpg",
          "currentPrice": 350000,
          "oldPrice": 374500,
          "discount": 7,
          "hasDiscount": true
        },
        {
          "id": 62,
          "name": "Bó hoa hồng đỏ, vàng (2)",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung3 Bó hoa hồng đỏ, vàng Discount 5%.jpg",
          "currentPrice": 350000,
          "oldPrice": 367500,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 63,
          "name": "Bó hoa ly, vàng",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung4 Bó hoa ly, vàng Discount 8%.jpg",
          "currentPrice": 350000,
          "oldPrice": 378000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 64,
          "name": "Bó hoa hồng cam",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung5 Bó hoa hồng cam, Discount 10%.jpg",
          "currentPrice": 350000,
          "oldPrice": 385000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 65,
          "name": "Bó hoa hồng cam trắng",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung6 Bó hoa hồng cam trắng Discount 10%.jpg",
          "currentPrice": 350000,
          "oldPrice": 385000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 66,
          "name": "Bó hoa hồng vàng",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung7 Bó hoa hồng vàng  Discount 10%.jpg",
          "currentPrice": 350000,
          "oldPrice": 385000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 67,
          "name": "Bó hoa hồng cam hồng vàng",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung8 Bó hoa hồng cam hồng vàng Discount 5%.jpg",
          "currentPrice": 350000,
          "oldPrice": 367500,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 68,
          "name": "Bó hoa hồng cam trắng vàng, hồng",
          "image": "assets/img/products/HOACHUCMUNG/Hoachucmung9 Bó hoa hồng cam trắng vàng, hồng Discount 6%.jpg",
          "currentPrice": 350000,
          "oldPrice": 371000,
          "discount": 6,
          "hasDiscount": true
        }
      ]
    },
    {
      "id": "hoa-tang",
      "name": "HOA TANG",
      "products": [
        {
          "id": 69,
          "name": "hoa cúc trắng",
          "image": "assets/img/products/HOATANG/Hoatang1 hoa cúc trắng Discount 10%.jpg",
          "currentPrice": 320000,
          "oldPrice": 352000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 70,
          "name": "hoa cúc trắng (2)",
          "image": "assets/img/products/HOATANG/Hoatang10 hoa cúc trắng Discount 10%.jpg",
          "currentPrice": 320000,
          "oldPrice": 352000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 71,
          "name": "hoa ly trắng",
          "image": "assets/img/products/HOATANG/Hoatang2 hoa ly trắng Discount 5%.jpg",
          "currentPrice": 320000,
          "oldPrice": 336000,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 72,
          "name": "hoa hồng, cúc trắng",
          "image": "assets/img/products/HOATANG/Hoatang3 hoa hồng, cúc trắng Discount 5%.jpg",
          "currentPrice": 320000,
          "oldPrice": 336000,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 73,
          "name": "hoa ly trắng (2)",
          "image": "assets/img/products/HOATANG/Hoatang4 hoa ly trắng Discount 5%.jpg",
          "currentPrice": 320000,
          "oldPrice": 336000,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 74,
          "name": "hoa hồng trắng, hoa cúc trắng",
          "image": "assets/img/products/HOATANG/Hoatang5 hoa hồng trắng, hoa cúc trắng Discount 8%.jpg",
          "currentPrice": 320000,
          "oldPrice": 345600,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 75,
          "name": "hoa hồng trắng, hoa cúc",
          "image": "assets/img/products/HOATANG/Hoatang6 hoa hồng trắng, hoa cúc Discount 5%.jpg",
          "currentPrice": 320000,
          "oldPrice": 336000,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 76,
          "name": "hoa hồng trắng",
          "image": "assets/img/products/HOATANG/Hoatang7 hoa hồng trắng Discount 10%.jpg",
          "currentPrice": 320000,
          "oldPrice": 352000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 77,
          "name": "hoa hồng trắng (2)",
          "image": "assets/img/products/HOATANG/Hoatang8 hoa hồng trắng Discount 7%.jpg",
          "currentPrice": 320000,
          "oldPrice": 342400,
          "discount": 7,
          "hasDiscount": true
        },
        {
          "id": 78,
          "name": "hoa hồng trắng (3)",
          "image": "assets/img/products/HOATANG/Hoatang9 hoa hồng trắng Discount 5%.jpg",
          "currentPrice": 320000,
          "oldPrice": 336000,
          "discount": 5,
          "hasDiscount": true
        }
      ]
    },
    {
      "id": "hoa-tinh-yeu",
      "name": "HOA TÌNH YÊU",
      "products": [
        {
          "id": 79,
          "name": "Bó hoa hồng đỏ",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu1 Bó hoa hồng đỏ Discount 8%.jpg",
          "currentPrice": 380000,
          "oldPrice": 410400,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 80,
          "name": "Bó hoa hồng",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu10 Bó hoa hồng Discount 8%.jpg",
          "currentPrice": 380000,
          "oldPrice": 410400,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 81,
          "name": "Bó hoa hồng trắng",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu2 Bó hoa hồng trắng Discount 8%.jpg",
          "currentPrice": 380000,
          "oldPrice": 410400,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 82,
          "name": "Bó hoa tulip cam trắng",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu3 Bó hoa tulip cam trắng Discount 5%.jpg",
          "currentPrice": 380000,
          "oldPrice": 399000,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 83,
          "name": "Bó hoa tulip hồng",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu4 Bó hoa tulip hồng Discount 5%.jpg",
          "currentPrice": 380000,
          "oldPrice": 399000,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 84,
          "name": "Bó hoa tulip hồng (2)",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu5 Bó hoa tulip hồng Discount 5%.jpg",
          "currentPrice": 380000,
          "oldPrice": 399000,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 85,
          "name": "Bó hoa Rum, lan hồ điệp",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu6 Bó hoa Rum, lan hồ điệp Discount 8%.jpg",
          "currentPrice": 380000,
          "oldPrice": 410400,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 86,
          "name": "Bó hoa tulip, hoa sen",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu7 Bó hoa tulip, hoa sen Discount 10%.jpg",
          "currentPrice": 380000,
          "oldPrice": 418000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 87,
          "name": "Bó hoa thanh trà",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu8 Bó hoa thanh trà Discount 5%.jpg",
          "currentPrice": 380000,
          "oldPrice": 399000,
          "discount": 5,
          "hasDiscount": true
        },
        {
          "id": 88,
          "name": "Bó hoa tulip, hoa ly trắng",
          "image": "assets/img/products/HoaTinhYeu/Hoatinhyeu9 Bó hoa tulip, hoa ly trắng Discount 7%.jpg",
          "currentPrice": 380000,
          "oldPrice": 406600,
          "discount": 7,
          "hasDiscount": true
        }
      ]
    },
    {
      "id": "hoa-khai-truong",
      "name": "HOA KHAI TRƯƠNG",
      "products": [
        {
          "id": 89,
          "name": "Hoa khai trương hồng phát màu hồng",
          "image": "assets/img/products/HoaKhaiTruong/hoakhaitruong1 Hoa khai trương hồng phát màu hồng Discount 8%.jpg",
          "currentPrice": 650000,
          "oldPrice": 702000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 90,
          "name": "Hoa khai trương màu đỏ",
          "image": "assets/img/products/HoaKhaiTruong/hoakhaitruong2 Hoa khai trương màu đỏ Discount 10%.jpg",
          "currentPrice": 650000,
          "oldPrice": 715000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 91,
          "name": "Lãng hoa chúc mừng đẹp",
          "image": "assets/img/products/HoaKhaiTruong/hoakhaitruong3 Lãng hoa chúc mừng đẹp Discount 0%.jpg",
          "currentPrice": 650000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 92,
          "name": "Lãng hoa chúc mừng khai trương khổng lồ",
          "image": "assets/img/products/HoaKhaiTruong/hoakhaitruong4 Lãng hoa chúc mừng khai trương khổng lồ Discount 0%.jpg",
          "currentPrice": 650000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 93,
          "name": "Kệ hoa hồng chúc mừng",
          "image": "assets/img/products/HoaKhaiTruong/hoakhaitruong5 Kệ hoa hồng chúc mừng Discount10%.jpg",
          "currentPrice": 650000,
          "oldPrice": 715000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 94,
          "name": "Kệ hoa khai trương xinh xắn",
          "image": "assets/img/products/HoaKhaiTruong/hoakhaitruong6 Kệ hoa khai trương xinh xắn Discount 10%.jpg",
          "currentPrice": 650000,
          "oldPrice": 715000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 95,
          "name": "Hoa khai trương đẹp",
          "image": "assets/img/products/HoaKhaiTruong/hoakhaitruong7 Hoa khai trương đẹp Discount 0%.jpg",
          "currentPrice": 650000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 96,
          "name": "Hoa chúc mừng khai trương hồng phát màu xanh",
          "image": "assets/img/products/HoaKhaiTruong/hoakhaitruong8 Hoa chúc mừng khai trương hồng phát màu xanh Discount 0%.jpg",
          "currentPrice": 650000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        }
      ]
    },
    {
      "id": "hoa-cuoi",
      "name": "HOA CƯỚI",
      "products": [
        {
          "id": 97,
          "name": "Bó hoa cưới với hoa hồng phấn",
          "image": "assets/img/products/HoaCuoi/hoacuoi1  Bó hoa cưới với hoa hồng phấn Discount 10%.jpg",
          "currentPrice": 800000,
          "oldPrice": 880000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 98,
          "name": "Bó hoa hồng, cẩm tú cầu",
          "image": "assets/img/products/HoaCuoi/hoacuoi10 Bó hoa hồng, cẩm tú cầu Discount 8%.jpg",
          "currentPrice": 800000,
          "oldPrice": 864000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 99,
          "name": "Hoa tulip trắng",
          "image": "assets/img/products/HoaCuoi/hoacuoi2 Hoa tulip trắng Discount 0%.jpg",
          "currentPrice": 800000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 100,
          "name": "Hoa alstroemeria (huệ Peru)",
          "image": "assets/img/products/HoaCuoi/hoacuoi3  Hoa alstroemeria (huệ Peru)   Discount 10%.jpg",
          "currentPrice": 800000,
          "oldPrice": 880000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 101,
          "name": "Hoa cưới kết hợp hoa rum (calla lily)",
          "image": "assets/img/products/HoaCuoi/hoacuoi4 Hoa cưới kết hợp hoa rum (calla lily)  Discount 0%.jpg",
          "currentPrice": 800000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 102,
          "name": "Hoa mao lương (ranunculus)",
          "image": "assets/img/products/HoaCuoi/hoacuoi5 Hoa mao lương (ranunculus)  Discount 10%.jpg",
          "currentPrice": 800000,
          "oldPrice": 880000,
          "discount": 10,
          "hasDiscount": true
        },
        {
          "id": 103,
          "name": "Hoa tulip màu hồng",
          "image": "assets/img/products/HoaCuoi/hoacuoi6  Hoa tulip màu hồng Discount 8%.jpg",
          "currentPrice": 800000,
          "oldPrice": 864000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 104,
          "name": "Sự kết hợp của Hoa tulip hồng, dạ lan hương trắng",
          "image": "assets/img/products/HoaCuoi/hoacuoi7  Sự kết hợp của Hoa tulip hồng, dạ lan hương trắng  Discount 8%.jpg",
          "currentPrice": 800000,
          "oldPrice": 864000,
          "discount": 8,
          "hasDiscount": true
        },
        {
          "id": 105,
          "name": "hoa mao lương (ranunculus) và hoa lan nam phi (freesia)",
          "image": "assets/img/products/HoaCuoi/hoacuoi8 hoa mao lương (ranunculus) và hoa lan nam phi (freesia) Discount 0%.jpg",
          "currentPrice": 800000,
          "oldPrice": null,
          "discount": 0,
          "hasDiscount": false
        },
        {
          "id": 106,
          "name": "Bó hoa cưới gồm hoa hồng và hoa cát tường (Lisianthus)",
          "image": "assets/img/products/HoaCuoi/hoacuoi9 Bó hoa cưới gồm hoa hồng và hoa cát tường (Lisianthus) discount 8%.jpg",
          "currentPrice": 800000,
          "oldPrice": 864000,
          "discount": 8,
          "hasDiscount": true
        }
      ]
    }
  ]
};

(function(){
  
  try {
    const categories = (window.products && window.products.categories) || [];

    
    const idMap = new Map();
    categories.forEach(cat => {
      (cat.products || []).forEach(p => { if (p && typeof p.id === 'number') idMap.set(p.id, p); });
    });

    const saleProducts = [];
    const seen = new Set();
    idMap.forEach(p => {
      if (p.hasDiscount && !seen.has(p.id)) { seen.add(p.id); saleProducts.push(p); }
    });
    const saleCat = categories.find(c => c.id === 'dang-giam-gia');
    if (saleCat) saleCat.products = saleProducts;
    else if (saleProducts.length) categories.unshift({ id: 'dang-giam-gia', name: 'Đang Giảm Giá', products: saleProducts });

    
    const sanPhamMoiIds = [2,17,19,21,36,78,80,91,92,100];
    const datNhieuNhatIds = [1,3,33,34,45,46,56,80,84,95,98,105];

    const resolveList = ids => ids.map(id => idMap.get(id)).filter(Boolean);

    const sanPhamMoiProducts = resolveList(sanPhamMoiIds);
    const datNhieuNhatProducts = resolveList(datNhieuNhatIds);

    const spmCat = categories.find(c => c.id === 'san-pham-moi');
    if (spmCat) spmCat.products = sanPhamMoiProducts;
    else if (sanPhamMoiProducts.length) categories.unshift({ id: 'san-pham-moi', name: 'SẢN PHẨM MỚI', products: sanPhamMoiProducts });

    const dnnCat = categories.find(c => c.id === 'dat-nhieu-nhat');
    if (dnnCat) dnnCat.products = datNhieuNhatProducts;
    else if (datNhieuNhatProducts.length) categories.unshift({ id: 'dat-nhieu-nhat', name: 'ĐẶT NHIỀU NHẤT', products: datNhieuNhatProducts });

    
    const missing = ids => ids.filter(id => !idMap.has(id));
    const missingSan = missing(sanPhamMoiIds);
    const missingDat = missing(datNhieuNhatIds);
    if (missingSan.length) console.warn('san-pham-moi ids not found:', missingSan);
    if (missingDat.length) console.warn('dat-nhieu-nhat ids not found:', missingDat);

  } catch (err) {
    console.error('Set explicit category ids failed:', err);
  }
})();


